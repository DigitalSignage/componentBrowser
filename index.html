<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>
        window.debug = 1;
    </script>
    <script type="text/javascript" src="js/common/jq/jq.js"></script>
    <!--
    <script type="text/javascript" src="utils/xml2json.js"></script>
    <script type="text/javascript" src="utils/playerLoad.js"></script>
    <script type="text/javascript" src="utils/errCatch.js"></script>
    <script type="text/javascript" src="bridge/As3JsBridge.js"></script>
    -->
    <script data-main="init" src="js/common/requirejs/require.js" type="text/javascript"></script>

    <style>
        #if {
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        body {
            overflow: hidden;
        }
    </style>
</head>
<script>
    $(document).ready(function () {

        var $iFrame = $('#if');

        var urls = ['http://cnn.com', 'http://yahoo.com', 'http://dance.com'];

        function goToURL(i_url) {
            $iFrame.attr('src', i_url);
        };

        self.m_gui = require('nw.gui');
        self.m_win = self.m_gui.Window.get();

        $iFrame.css({
            minWidth: window.outerWidth,
            minHeight: window.outerHeight
        });

        var fd = setInterval(function () {
            var url = urls.shift()
            if (url) {
                goToURL(url);

            } else {
                clearInterval(fd);
            }
        }, 7000);

        // intercept clicks on links and modify
        $iFrame.on("load", function () {
            var iframeContents = $(this).contents();
            iframeContents.find("a").click(function (e) {
                e.preventDefault();
                var link = $(this).attr("href");
                goToURL('http://www.digitalsignage.com/' + link);
            });
        });

        $iFrame.attr('src', 'http://digitalsignage.com');
    })

</script>
<body>
<iframe id="if" frameborder="0" nwdisable nwfaketop/>
</body>
</html>
